{"version":3,"sources":["../../../Areas/Admin/js/site-users.js"],"names":["Vue","component","mixins","siteUsersMixin","data","dialog","editDialog","headers","text","value","sortable","editedIndex","editedUser","email","displayName","userName","password","passwordVisible","role","defaultUser","rules","emailRules","v","test","userNameRules","length","displayNameRules","passwordRules","required","trim","min","pagination","loading","errMsg","methods","addUser","close","Object","assign","$refs","form","reset","save","selectedRole","axios","post","$root","then","resp","users","push","catch","err","response","toastError","editUser","alert","lockUser"],"mappings":"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","file":"site-users.js","sourcesContent":["ï»¿Vue.component('site-users', {\r\n    mixins: [siteUsersMixin],\r\n    data: () => ({\r\n        dialog: false,\r\n        editDialog: false,\r\n        headers: [\r\n            { text: '', value: 'avatar', sortable: false },\r\n            { text: 'Display Name', value: 'displayName' },\r\n            { text: 'Username', value: 'userName' },\r\n            { text: 'Joined On', value: 'joinedOn' },\r\n            { text: 'Locked Out', value: 'lockedOut' },\r\n            { text: 'Role', value: 'role' },\r\n            { text: 'Actions', value: 'name', sortable: false }\r\n        ],\r\n        editedIndex: -1,\r\n        editedUser: {\r\n            email: '',\r\n            displayName: '',\r\n            userName: '',\r\n            password: '',\r\n            passwordVisible: false,\r\n            role: '',\r\n        },\r\n        defaultUser: {\r\n            email: '',\r\n            displayName: '',\r\n            userName: '',\r\n            password: '',\r\n            passwordVisible: false,\r\n            role: '',\r\n        },\r\n        rules: {\r\n            emailRules: [\r\n                v => !!v || 'Required',\r\n                v => /.+@.+/.test(v) || 'Email must be valid',\r\n            ],\r\n            userNameRules: [\r\n                v => !!v || 'Required',\r\n                v => (!!v && v.length >= 2) || 'Min 2 characters',\r\n                v => (!!v && v.length <= 24) || 'Max 20 characters',\r\n                v => /^[a-zA-Z0-9-_]+$/.test(v) || 'Alphanumeric, dash, underscore only',\r\n            ],\r\n            displayNameRules: [\r\n                v => !!v || 'Required',\r\n                v => (!!v && v.length >= 2) || 'Min 2 characters',\r\n                v => (!!v && v.length <= 24) || 'Max 24 characters',\r\n            ],\r\n            passwordRules: {\r\n                required: v => (!!v && !!v.trim()) || 'Required',\r\n                min: v => (!!v && v.length >= 8) || 'Min 8 characters',\r\n            },\r\n        },\r\n        pagination: {},\r\n        loading: false,\r\n        errMsg: '',\r\n    }),\r\n    methods: {\r\n        /**\r\n         * Open dialog to add a new user.\r\n         */\r\n        addUser() {\r\n            this.dialog = true;\r\n        },\r\n        /**\r\n         * Close dialog and reset form.\r\n         */\r\n        close() {\r\n            this.dialog = false;\r\n            this.editedUser = Object.assign({}, this.defaultUser);\r\n            this.editedIndex = -1;\r\n            this.$refs.form.reset();\r\n            this.errMsg = '';\r\n        },\r\n        /**\r\n         * Upsert a user.\r\n         */\r\n        save() {\r\n            this.editedUser.role = this.selectedRole;\r\n            console.log('Edited User: ', this.editedUser);\r\n            axios.post('/admin/users', this.editedUser, this.$root.headers)\r\n                .then(resp => {\r\n                    console.log('Returned user: ', resp.data);\r\n                    if (this.editedIndex > -1) { // update todo\r\n                        Object.assign(this.users[this.editedIndex], this.editedUser)\r\n                    } else { // insert\r\n                        this.users.push(resp.data);\r\n                    }\r\n                    this.close();\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    this.errMsg = err.response.data;\r\n                    this.$root.toastError('Add user failed.');   \r\n                });\r\n        },\r\n        /**\r\n         * Edit user role.\r\n         * @param {any} user\r\n         */\r\n        editUser(user) {\r\n            alert(`This feature is coming soon.`);\r\n            //this.editedIndex = this.users.indexOf(user)\r\n            //this.editedUser = Object.assign({}, user)\r\n            //this.editDialog = true\r\n        },\r\n        /**\r\n         * Lock user out.\r\n         * @param {any} user\r\n         */\r\n        lockUser(user) {\r\n            alert(`This feature is coming soon.`);\r\n        }\r\n    },\r\n});\r\n"]}